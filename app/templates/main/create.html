{% extends 'main/base.html' %}

{% block title %}
–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/create.css') }}">
{% endblock %}
{% block content %}
<div class="nav">
  <a href="{{ url_for('main.index') }}">–ì–ª–∞–≤–Ω–∞—è > </a>
  <a href="#"> –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ </a>
</div>
<div class="main-box">

  <br><br>
  <h1 style="text-align: center; margin-bottom: 20px; display: inline">–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ </h1>

  <form action="{{ url_for('idea.logout') }}" method="POST" style="display: inline">
    <button type="submit" class="logout-btn">–í—ã–π—Ç–∏</button>
  </form>

  {% if is_admin %}

    <div class="form-group">
      <label for="add-where">–ö—É–¥–∞ –¥–æ–±–∞–≤–∏—Ç—å?</label>
      <select id="add-where" name="tool_type" class="form-control">
        <option value="events">–ê–Ω–æ–Ω—Å—ã –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</option>
        <option value="idea">–í–¥–æ—Ö–Ω–æ–≤–ª—è–µ–º—Å—è –∏–¥–µ—è–º–∏</option>
        <option value="tools-chapter">–†–∞–∑–¥–µ–ª —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤</option>
        <option value="tools">–¶–∏—Ñ—Ä–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</option>
        <option value="res">–¶–∏—Ñ—Ä–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã</option>
      </select>
    </div>



    <div class="form-container">

<form id="events-form" action="{{ url_for('event.create') }}" method="POST" enctype="multipart/form-data">
  <input type="hidden" name="form_type" value="events">

  <!-- üìÖ –î–∞—Ç–∞ –∏–ª–∏ –ø–µ—Ä–∏–æ–¥ -->
   <!-- üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ -->
<div class="form-group">
  <label for="events-link">–°—Å—ã–ª–∫–∞ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ:</label>
  <input type="url" id="events-link" name="link" maxlength="200"  class="form-control" placeholder="https://–ø—Ä–∏–º–µ—Ä.—Å–æ–±—ã—Ç–∏–µ">
</div>

  <div class="form-group">
    <label for="events-date-start">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
    <input type="date" id="events-date-start" name="date_start" class="form-control">

    <label for="events-date-end" style="margin-top: 10px;">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
    <input type="date" id="events-date-end" name="date_end" class="form-control">

    <!-- üëÅ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞—Ç -->
    <div id="events-date-display" style="margin-top: 10px; font-style: italic; color: #555;"></div>
  </div>

  <!-- üåç –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è -->
  <div class="form-group">
    <label for="events-place">–§–æ—Ä–º–∞—Ç –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:</label><br>

       <label for="place-offline" class="place-offline">–û—á–Ω–æ</label>
    <input type="checkbox" id="place-offline" class="place-offline" name="place" value="–û—á–Ω–æ"> <br>
     <label for="place-online" class="place-online">–û–Ω–ª–∞–π–Ω</label>
    <input type="checkbox" id="place-online" class="place-online" name="place" value="–û–Ω–ª–∞–π–Ω">

  </div>

  <!-- üìù –û–ø–∏—Å–∞–Ω–∏–µ -->
<div class="form-group">
  <label for="events-text">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
  <textarea id="events-text" name="text" class="form-control" maxlength="200" data-counter="text-counter"></textarea>
  <small id="text-counter">0 / 200</small>
</div>


  <!-- üóØ –°–ª–æ–≥–∞–Ω -->
<div class="form-group">
  <label for="events-slogan">–°–ª–æ–≥–∞–Ω:</label>
  <input type="text" id="events-slogan" name="slogan" class="form-control" maxlength="70" data-counter="slogan-counter">
  <small id="slogan-counter">0 / 70</small>
</div>



  <!-- üñº –§–æ—Ç–æ -->
  <div class="form-group">
    <label for="events-photo">–§–æ—Ç–æ: (–§–æ—Ä–º–∞—Ç - —Å—Ç—Ä–æ–≥–æ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —Ñ–æ—Ç–æ)</label>
    <input type="file" id="events-photo" data-preview="events-preview" name="photo" accept="image/*" class="form-control">
    <div id="events-preview" class="preview-box"></div>
  </div>

  <div style="text-align: center; margin-top: 30px;">
    <button type="submit" class="submit-btn">–°–æ–∑–¥–∞—Ç—å –∞–Ω–æ–Ω—Å</button>
  </div>
</form>

      <form action="{{ url_for('idea.create') }}" method="POST" id="idea-form" enctype="multipart/form-data">

        <input type="hidden" name="form_type" value="ideas">
        <div class="form-group">
          <label for="idea-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∏–¥–µ–∏:</label>
          <input
            type="text" id="idea-name" name="name" class="form-control"
            placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required maxlength="30" data-counter="idea-name-counter">
          <small id="idea-name-counter">0 / 30</small>
        </div>

        <div class="form-group">
          <label for="idea-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
          <input type="text" id="idea-description" name="description" class="form-control"
            placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" required maxlength="150" data-counter="idea-description-counter">
          <small id="idea-description-counter">0 / 150</small>
        </div>

        <!-- <div class="form-group">
          <label for="idea-tags">–¢–µ–≥–∏ (–æ–ø–æ—Ä–Ω—ã–µ —Å–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
          <input type="text" id="idea-tags" name="tags" class="form-control" placeholder="–¢–µ–≥–∏" required>
        </div> -->


<style>
  .dropdown-checkbox {
    position: relative;
    display: inline-block;
    width: 100%;
  }

  .dropdown-checkbox .dropdown-btn {
    width: 100%;
    text-align: left;
    padding: 10px;
    border: 1px solid #ccc;
    cursor: pointer;
    background-color: #fff;
    border-radius: 4px;
  }

  .dropdown-checkbox .dropdown-content {
    display: none;
    position: absolute;
    background-color: #fff;
    width: 100%;
    border: 1px solid #ccc;
    max-height: 240px;
    overflow-y: auto;
    z-index: 1;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    padding: 10px;
    box-sizing: border-box;
  }

  .dropdown-checkbox input[type="checkbox"] {
    margin-right: 8px;
  }

  .dropdown-checkbox.show .dropdown-content {
    display: block;
  }

  .dropdown-checkbox .group-label {
    font-weight: bold;
    margin-top: 10px;
    margin-bottom: 4px;
    display: block;
    color: #333;
  }

  .dropdown-checkbox label {
    display: block;
    margin: 2px 0;
    cursor: pointer;
  }
</style>
<h4>–≤—ã–±–æ—Ä —Ç–µ–≥–æ–≤</h4>
<hr>
<div class="form-group">
  <label>–û—Ç–¥–µ–ª:</label>
  <div class="dropdown-checkbox" id="dropdown1">
    <div class="dropdown-btn" onclick="toggleDropdown('dropdown1')">–û—Ç–¥–µ–ª –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è...</div>
    <div class="dropdown-content">
      <label><input type="checkbox" value="–ò–ó–û">–ò–ó–û</label>
      <label><input type="checkbox" value="–ú—É–∑—ã–∫–∞">–ú—É–∑—ã–∫–∞</label>
      <label><input type="checkbox" value="–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ">–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</label>
      <label><input type="checkbox" value="WEB-–¥–∏–∑–∞–π–Ω">WEB-–¥–∏–∑–∞–π–Ω</label>
      <label><input type="checkbox" value="3D –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ">3D –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ</label>
      <label><input type="checkbox" value="–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–∏–∫–∞">–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–∏–∫–∞</label>
      <label><input type="checkbox" value="–ì–æ–Ω—á–∞—Ä–Ω–æ–µ –¥–µ–ª–æ">–ì–æ–Ω—á–∞—Ä–Ω–æ–µ –¥–µ–ª–æ</label>
    </div>
  </div>
</div>

<div class="form-group">
  <label>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å:</label>
  <div class="dropdown-checkbox" id="dropdown2">
    <div class="dropdown-btn" onclick="toggleDropdown('dropdown2')">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å</div>
    <div class="dropdown-content">
      <label><input type="checkbox" value="–ù–µ–π—Ä–æ—Å–µ—Ç–∏">–ù–µ–π—Ä–æ—Å–µ—Ç–∏</label>
      <label><input type="checkbox" value="–ü—Ä–æ–≥—Ä–∞–º–º—ã">–ü—Ä–æ–≥—Ä–∞–º–º—ã</label>
      <label><input type="checkbox" value="–û–Ω–ª–∞–π–Ω-–¥–æ—Å–∫–∏">–û–Ω–ª–∞–π–Ω-–¥–æ—Å–∫–∏</label>
      <label><input type="checkbox" value="–ö–µ–π—Å—ã">–ö–µ–π—Å—ã</label>
    </div>
  </div>
</div>

<input type="hidden" name="tags" id="combinedTags">
<hr>
<br>
<script>
  function toggleDropdown(id) {
    document.getElementById(id).classList.toggle("show");
  }

  window.addEventListener("click", function (e) {
    ['dropdown1', 'dropdown2'].forEach(function(id) {
      const el = document.getElementById(id);
      if (!el.contains(e.target)) {
        el.classList.remove("show");
      }
    });
  });

  function combineTags() {
    const allChecked = document.querySelectorAll('.dropdown-checkbox input[type="checkbox"]:checked');
    const values = Array.from(allChecked).map(cb => cb.value);
    document.getElementById('combinedTags').value = values.join(', ');
  }

  // –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É submit
  document.getElementById("idea-form").addEventListener("submit", function () {
    combineTags();
  });
</script>
        <div class="form-group">
          <label for="idea-links">–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Å—ã–ª–∫–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
          <input type="text" id="idea-links" name="links" maxlength="220" class="form-control" placeholder="–°—Å—ã–ª–∫–∏" required>
        </div>


        <div class="form-group">
          <label for="photo-sanat">–í—ã–±—Ä–∞—Ç—å –æ–¥–Ω–æ —Ñ–æ—Ç–æ: (—Ñ–æ—Ä–º–∞—Ç - –Ω–µ –≤—ã—Ç—è–Ω—É—Ç–æ–µ —Ñ–æ—Ç–æ)</label><br>
          <input type="file" id="photo-sanat" data-preview="preview" name="photos" class="form-control" accept="image/*">
          <div id="preview" class="preview-box"></div>
        </div>

        <div class="form-group">
          <label for="pdf-upload">–ó–∞–≥—Ä—É–∑–∏—Ç—å PDF-—Ñ–∞–π–ª:</label>
          <input type="file" id="pdf-upload" name="pdf_file" accept="application/pdf" class="form-control">
        </div>

        <div style="text-align: center; margin-top: 30px;">
          <button type="submit" class="submit-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–¥–µ—é</button>
        </div>
      </form>


      <form id="tools-chapter-form" action="{{ url_for('tool.create_chapter') }}" method="POST" enctype="multipart/form-data"  style="display: none;">
        <input type="hidden" name="form_type" value="tools">

        <div class="form-group">
          <label for="tool-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞:</label>
          <input type="text" id="tool-chapter-name" name="tool_chapter_name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –†–∞–∑–¥–µ–ª–∞"
            class="form-control" maxlength="45" data-counter="tool-chapter-counter">
          <small id="tool-chapter-counter">0 / 45</small>
        </div>

        <div class="form-group">
          <label for="tool-name">–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞:</label>
          <input type="text" id="tool-chapter-description" name="tool_chapter_description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –†–∞–∑–¥–µ–ª–∞"
            class="form-control" maxlength="220" data-counter="tool-chapter-description-counter">
          <small id="tool-chapter-description-counter">0 / 220</small>
        </div>

        <div class="form-group">
          <label for="tool_photo">–í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ —Ä–∞–∑–¥–µ–ª–∞ - –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —Ñ–æ—Ç–æ:</label><br>
          <input type="file" id="tool_chapter_photo" data-preview="tool_chapter_preview" class="form-control" name="tool_chapter_photo" accept="image/*">
          <div id="tool_chapter_preview" class="preview-box"></div>
        </div>

        <div class="form-group">
          <label for="icon-upload">–í—ã–±—Ä–∞—Ç—å –∏–∫–æ–Ω–∫—É –Ω–µ–±–æ–ª—å—à–æ–µ - –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —Ñ–æ—Ç–æ:</label><br>
          <input type="file" id="tool_chapter_icon" name="tool_chapter_icon" class="form-control" accept="image/*">
        </div>

        <div style="text-align: center; margin-top: 30px;">
          <button type="submit" class="submit-btn">–°–æ–∑–¥–∞—Ç—å</button>
        </div>
      </form>

      <form id="tools-form" action="{{ url_for('tool.create') }}" method="POST" enctype="multipart/form-data" style="display: none;">
        <input type="hidden" name="form_type" value="tools">
        <div class="form-group">
          <label for="add-tool-where">–í –∫–∞–∫–æ–π —Ä–∞–∑–¥–µ–ª –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–±–∞–≤–∏—Ç—å?</label>

          <select id="add-tool-where" name="section_id" class="form-control">
            {% for section in sections %}
              <option value="{{ section.id }}">{{ section.name }}</option>
            {% endfor %}
          </select>

        </div>

        <div class="form-group">
          <label for="tool-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:</label>
          <input type="text" id="tool-name" name="tool_name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞" class="form-control" maxlength="100" data-counter="tool-name-counter"><small id="tool-name-counter">0 / 100</small>
        </div>

        <div class="form-group">
          <label for="tool_photo">–í—ã–±—Ä–∞—Ç—å –æ–¥–Ω–æ —Ñ–æ—Ç–æ - —Å–∫—Ä–∏–Ω—à–æ—Ç —Ç–∏—Ç—É–ª—å–Ω–æ–≥–æ –ª–∏—Å—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞:</label><br>
          <input type="file" id="tool_photo" data-preview="tool_preview" class="form-control" name="tool_photo" accept="image/*">
          <div id="tool_preview" class="preview-box"></div>
        </div>

        <div class="form-group">
          <label for="tool_pdf">–ó–∞–≥—Ä—É–∑–∏—Ç—å PDF-—Ñ–∞–π–ª:</label>
          <input type="file" id="tool_pdf" name="tool_pdf" accept="application/pdf" class="form-control">
        </div>

        <div style="text-align: center; margin-top: 30px;">
          <button type="submit" class="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</button>
        </div>
      </form>

       <form id="res" action="{{ url_for('resource.create') }}" method="POST" enctype="multipart/form-data" style="display: none;">
        <input type="hidden" name="form_type" value="res">

        <div class="form-group">
          <label for="res-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞:</label>
          <input type="text" id="res-name" name="res_name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞" class="form-control" maxlength="100" data-counter="res-name-counter">
          <small id="res-name-counter">0 / 100</small>
        </div>
        
        <div class="form-group">
          <label for="res_photo">–í—ã–±—Ä–∞—Ç—å –æ–¥–Ω–æ —Ñ–æ—Ç–æ (–ª–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞):</label><br>
          <input type="file" id="res_photo" data-preview="res_preview" class="form-control" name="res_photo" accept="image/*">
          <div id="res_preview" class="preview-box"></div>
        </div>

        <div class="form-group">
          <label for="res-dop">–ü–æ—è—Å–Ω–µ–Ω–∏–µ –∫ —Ä–µ—Å—É—Ä—Å—É (–æ–¥–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ):</label>
          <input type="text" id="res-dop" name="res_dop" placeholder="–ü–æ—è—Å–Ω–µ–Ω–∏–µ –∫ —Ä–µ—Å—É—Ä—Å—É" class="form-control" maxlength="120" data-counter="res-dop-counter">
          <small id="res-dop-counter">0 / 120</small>
        </div>

        <div class="form-group">
          <label for="res-description">–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞:</label>
          <!-- <input type="text" id="res-description" name="res_description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞" class="form-control" maxlength="220" data-counter="res-description-counter"> -->
          <textarea type="text" id="res-description" name="res_description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞" class="form-control" maxlength="220" data-counter="res-description-counter" style="height: 100px"></textarea>
          <small id="res-description-counter">0 / 220</small>
        </div>

        <div class="form-group">
          <label for="res_pdf">–ó–∞–≥—Ä—É–∑–∏—Ç—å PDF-—Ñ–∞–π–ª:</label>
          <input type="file" id="res_pdf" name="res_pdf" accept="application/pdf" class="form-control">
        </div>

        <div class="form-group">
          <label for="res-test">–¢–µ—Å—Ç: <button id="question-test">?</button></label>
          <textarea type="text" id="res-test" name="test" class="form-control" placeholder="–¢–µ—Å—Ç" required> </textarea>
        </div>

<div class="popap">
  <button id="question-test-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
  <div class="popap-content">
    <h2>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤–≤–æ–¥—É —Ç–µ—Å—Ç–∞</h2>
    <p>–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç, —Å–æ–±–ª—é–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç:</p>
    <ol>
      <li><strong>–í–æ–ø—Ä–æ—Å:</strong> –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:<br>
        <code>1) –°—Ç–æ–ª–∏—Ü–∞ –§—Ä–∞–Ω—Ü–∏–∏?</code>
      </li>
      <li><strong>–û—Ç–≤–µ—Ç—ã:</strong> –∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏:
        <ul>
          <li><code>-–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç</code></li>
          <li><code>+–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç</code></li>
        </ul>
      </li>
      <li><strong>–ú–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏:</strong> —Ç—Ä–∏ –∑–≤—ë–∑–¥–æ—á–∫–∏ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ:<br>
        <code>***</code>
      </li>
    </ol>
    <p><strong>–ü—Ä–∏–º–µ—Ä:</strong></p>
    <pre>
1) –°—Ç–æ–ª–∏—Ü–∞ –§—Ä–∞–Ω—Ü–∏–∏?
-–ú–æ—Å–∫–≤–∞
-–õ–æ–Ω–¥–æ–Ω
+–ü–∞—Ä–∏–∂

***

2) –°–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–æ–≤ <br>–Ω–∞ –ó–µ–º–ª–µ?
-5
+7
-6

***
    </pre>
  </div>
</div>

  <script>
    let cursorX = 0;
    let cursorY = 0;

    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏
    document.addEventListener('mousemove', function(event) {
      cursorX = event.clientX;
      cursorY = event.clientY;
      console.log("X:", cursorX, "Y:", cursorY); // –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    });

    const question_test = document.getElementById('question-test');
    const question_test_close = document.getElementById('question-test-close');
    const popap = document.querySelector('.popap');

    question_test.addEventListener('click', function(event) {
      event.preventDefault();
      event.stopPropagation();
      popap.style.display = 'block';
      popap.style.left = (cursorX + popap.offsetWidth / 2) + 'px';
      popap.style.top = (cursorY + popap.offsetHeight / 2 - 0) + 'px';
    });

    question_test_close.addEventListener('click', function(event) {
            event.preventDefault();
      event.stopPropagation();

      popap.style.display = 'none';
    });
  </script>


        <div style="text-align: center; margin-top: 30px;">
          <button type="submit" class="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ—Å—É—Ä—Å</button>
        </div>
      </form>

    </div>

  {% else %}

    <div class="enter-admin">
      <form action="{{ url_for('idea.create') }}" method="POST" class="form-container">

        <div class="form-group">
          <label for="admin-username">–õ–æ–≥–∏–Ω:</label>
          <input type="text" id="admin-username" name="username" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω" required>
        </div>

        <div class="form-group">
          <label for="admin-password">–ü–∞—Ä–æ–ª—å:</label>
          <input type="password" id="admin-password" name="password" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
        </div>

        <div style="text-align: center;">
          <button type="submit" class="submit-btn">–í–æ–π—Ç–∏</button>
        </div>
        
      </form>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const select = document.getElementById('add-where');
        
        const ideaForm = document.getElementById('idea-form');
        const toolsForm = document.getElementById('tools-form');
        const toolsChapterForm = document.getElementById('tools-chapter-form');
        const res = document.getElementById('res');

        const eventsForm = document.getElementById('events-form');

      function toggleForms() {
        if (select.value === 'idea') {
          ideaForm.style.display = 'block';
          toolsForm.style.display = 'none';
          toolsChapterForm.display = 'none';
          res.display = 'none';
          eventsForm.display = 'none';

          // –≤–∫–ª—é—á–∏—Ç—å –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã –∏–¥–µ–∏
          ideaForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = false);
          // –æ—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
          toolsForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          toolsChapterForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          res.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          eventsForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
        } else if (select.value === 'tools') {
          ideaForm.style.display = 'none';
          toolsForm.style.display = 'block';
          toolsChapterForm.display = 'none';
          res.display = 'none';
          eventsForm.display = 'none';


          ideaForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          toolsForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = false);
          toolsChapterForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          res.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          eventsForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);

        } else if (select.value === 'tools-chapter') {
          ideaForm.style.display = 'none';
          toolsForm.style.display = 'none';
          toolsChapterForm.display = 'block';
        res.display = 'none';
          eventsForm.display = 'none';

          ideaForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          toolsForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          toolsChapterForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = false);
          res.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          eventsForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);

        } else if (select.value === 'res') {
          ideaForm.style.display = 'none';
          toolsForm.style.display = 'none';
          toolsChapterForm.display = 'none';
          res.display = 'block';
          eventsForm.display = 'none';

          ideaForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          toolsForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          toolsChapterForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          res.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = false);
          eventsForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);

        } else if (select.value === 'events') {
                    ideaForm.style.display = 'none';
          toolsForm.style.display = 'none';
          toolsChapterForm.display = 'none';
          res.display = 'none';
          eventsForm.display = 'block';

          ideaForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          toolsForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          toolsChapterForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          res.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = true);
          eventsForm.querySelectorAll('input, select, textarea, button').forEach(el => el.disabled = false);

        }

        select.addEventListener('change', toggleForms);
        toggleForms(); // –ø–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—É—é —Ñ–æ—Ä–º—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      });
    </script>

  {% endif %}
  <br>
  <br>
  <br>

  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const select = document.getElementById('add-where');
      const ideaForm = document.getElementById('idea-form');
      const toolsForm = document.getElementById('tools-form');
      const toolsChapterForm = document.getElementById('tools-chapter-form');
      const res = document.getElementById('res');
      const eventsForm = document.getElementById('events-form');

      function toggleForms() {
        if (select.value === 'idea') {
          ideaForm.style.display = 'block';
          toolsForm.style.display = 'none';
          toolsChapterForm.style.display = 'none';
          res.style.display = 'none';
          eventsForm.style.display = 'none';
        } else if (select.value === 'tools') {
          ideaForm.style.display = 'none';
          toolsForm.style.display = 'block';
          toolsChapterForm.style.display = 'none';
          res.style.display = 'none';
          eventsForm.style.display = 'none';

        } else if (select.value === 'tools-chapter') {
          ideaForm.style.display = 'none';
          toolsForm.style.display = 'none';
          toolsChapterForm.style.display = 'block';
          res.style.display = 'none';
          eventsForm.style.display = 'none';

        } else if (select.value === 'res') {
          ideaForm.style.display = 'none';
          toolsForm.style.display = 'none';
          toolsChapterForm.style.display = 'none';
          res.style.display = 'block';
          eventsForm.style.display = 'none';
        } else if (select.value === 'events') {
          ideaForm.style.display = 'none';
          toolsForm.style.display = 'none';
          toolsChapterForm.style.display = 'none';
          res.style.display = 'none';
          eventsForm.style.display = 'block';
        }
      }

        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±–æ—Ä –∏–∑ sessionStorage
  const savedValue = sessionStorage.getItem('add-where-value');
  if (savedValue) {
    select.value = savedValue;
  }

  // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –Ω—É–∂–Ω—ã–π –±–ª–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  toggleForms();

  // –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ select —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –±–ª–æ–∫–∏
  select.addEventListener('change', () => {
    sessionStorage.setItem('add-where-value', select.value);
    toggleForms();
  });
    });
    </script>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('input[type="file"][data-preview]').forEach(input => {
        const previewId = input.dataset.preview;
        const previewBox = document.getElementById(previewId);
        let filesArray = [];

        input.addEventListener('change', () => {
          filesArray = Array.from(input.files);
          if (filesArray.length > 10) {
            alert('–ú–∞–∫—Å–∏–º—É–º 10 —Ñ–æ—Ç–æ');
            input.value = '';
            filesArray = [];
            previewBox.innerHTML = '';
            return;
          }

          renderPreview();
        });

        function renderPreview() {
          previewBox.innerHTML = '';
          const dt = new DataTransfer();

          filesArray.forEach((file, index) => {
            if (!file.type.startsWith('image/')) return;

            dt.items.add(file);

            const reader = new FileReader();
            reader.onload = e => {
              const wrapper = document.createElement('div');
              wrapper.style.display = 'inline-block';
              wrapper.style.position = 'relative';
              wrapper.style.margin = '10px';

              const img = document.createElement('img');
              img.src = e.target.result;
              img.style.maxWidth = '150px';
              img.style.maxHeight = '150px';
              img.style.objectFit = 'cover';
              img.style.border = '1px solid gray';
              img.style.borderRadius = '5px';

              const delBtn = document.createElement('button');
              delBtn.textContent = '‚úñ';
              delBtn.type = 'button';
              delBtn.style.position = 'absolute';
              delBtn.style.top = '0';
              delBtn.style.right = '0';
              delBtn.style.background = 'rgba(0,0,0,0.6)';
              delBtn.style.color = 'white';
              delBtn.style.border = 'none';
              delBtn.style.cursor = 'pointer';
              delBtn.style.borderRadius = '0 5px 0 5px';

              delBtn.addEventListener('click', () => {
                filesArray.splice(index, 1);
                renderPreview();
              });

              wrapper.appendChild(img);
              wrapper.appendChild(delBtn);
              previewBox.appendChild(wrapper);
            };
            reader.readAsDataURL(file);
          });

          input.files = dt.files;
        }
      });
    });
  </script>

</div>


<script>
  document.addEventListener('DOMContentLoaded', () => {
    const select = document.getElementById('add-where');

    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ sessionStorage
    const savedValue = sessionStorage.getItem('add-where-value');
    if (savedValue) {
      select.value = savedValue;
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—ã–±–æ—Ä–∞
    select.addEventListener('change', () => {
      sessionStorage.setItem('add-where-value', select.value);
    });
  });
</script>


<script>
document.addEventListener('DOMContentLoaded', function () {
  const fields = document.querySelectorAll('input[maxlength][data-counter], textarea[maxlength][data-counter]');

  fields.forEach(field => {
    const counterId = field.getAttribute('data-counter');
    const counterElem = document.getElementById(counterId);
    const maxLength = parseInt(field.getAttribute('maxlength'));

    if (!counterElem) return;

    function updateCounter() {
      const currentLength = field.value.length;
      counterElem.textContent = `${currentLength} / ${maxLength}`;
    }

    field.addEventListener('input', updateCounter);
    updateCounter(); // –û–±–Ω–æ–≤–∏–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ, –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç
  });
});
</script>
{% endblock %}

